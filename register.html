<script>
  // ✅ Supabase API থেকে Project URL + anon public key বসাবেন
  const supabaseUrl = "https://dppgeenxzaxjmzmwzllk.supabase.co";
  const supabaseKey = "PASTE_YOUR_ANON_PUBLIC_KEY_HERE"; // <-- eyJ... key
  const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

  async function register() {
    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value;
    const business = document.getElementById("business").value.trim();
    const license = document.getElementById("license").value.trim();
    const phone = document.getElementById("phone").value.trim();
    const msg = document.getElementById("msg");

    msg.innerHTML = "Processing registration...";

    // ✅ Basic validation
    if (!business || !email || !password || !license || !phone) {
      msg.innerHTML = "❌ Please fill all fields.";
      return;
    }
    if (password.length < 6) {
      msg.innerHTML = "❌ Password must be at least 6 characters.";
      return;
    }

    const { data, error } = await supabase.auth.signUp({
      email,
      password,
      options: {
        data: {
          business_name: business,
          trade_license: license,
          phone: phone,
          approved: false
        }
      }
    });

    if (error) {
      msg.innerHTML = "❌ " + error.message;
      return;
    }

    // ✅ Success: usually email confirmation required
    msg.innerHTML = "✅ Registration submitted. Please check your email to confirm.";

    // চাইলে auto redirect:
    // setTimeout(() => { window.location.href = "login.html"; }, 1500);
  }
</script>
